<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!-- saved from url=(0064)https://cw.felk.cvut.cz/courses/a4b33flp/task.php?task=simulator -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <meta http-equiv="cache-control" content="no-cache">
  <link rel="stylesheet" type="text/css" href="./hw01_assignment_files/default.css">
  <title>Zad�n� �lohy z A4B33FLP</title>
</head>
<div><template shadowrootmode="open"><style>.skip-silence-bar{all:initial;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#fff;max-height:25px;background:#293033;border-radius:25px;align-items:center;padding:8px 8px 8px 20px;font-family:Poppins,sans-serif;animation:animate-in-command-bar .5s;display:flex;position:fixed;bottom:1rem;right:1rem}.skip-silence-bar .bar-text{align-items:center;display:flex}.skip-silence-bar .info{text-decoration:underline;color:#565656!important}.skip-silence-bar .speed-setting{display:flex}.skip-silence-bar .speed-setting label{white-space:nowrap;align-items:center;margin-right:5px;display:flex}.skip-silence-bar .slider-setting .setting-info{align-items:center;margin-top:0;display:flex}.skip-silence-bar .slider-setting input{display:none}@keyframes animate-in-command-bar{0%{opacity:0}}.skip-silence-bar-collapsed{color:#fff;width:40px;height:40px;cursor:pointer;background:#293033;border-radius:50%;justify-content:center;align-items:center;animation:animate-in-command-collapsed .5s;display:flex;position:fixed;bottom:1rem;right:1rem}@keyframes animate-in-command-collapsed{0%{opacity:0}}.skip-silence-bar,.skip-silence-bar-collapsed{z-index:100000}@font-face{font-family:Poppins;font-style:normal;font-display:swap;font-weight:400;src:url(poppins-devanagari-400-normal.20fc2635.woff2)format("woff2"),url(poppins-all-400-normal.0298587e.woff)format("woff");unicode-range:U+900-97F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:Poppins;font-style:normal;font-display:swap;font-weight:400;src:url(poppins-latin-ext-400-normal.9f87e1a8.woff2)format("woff2"),url(poppins-all-400-normal.0298587e.woff)format("woff");unicode-range:U+100-24F,U+259,U+1E??,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-display:swap;font-weight:400;src:url(poppins-latin-400-normal.53f07e8c.woff2)format("woff2"),url(poppins-all-400-normal.0298587e.woff)format("woff");unicode-range:U+??,U+131,U+152-153,U+2BB-2BC,U+2C6,U+2DA,U+2DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-display:swap;font-weight:600;src:url(poppins-devanagari-600-normal.5b72b0b7.woff2)format("woff2"),url(poppins-all-600-normal.29420735.woff)format("woff");unicode-range:U+900-97F,U+1CD0-1CF6,U+1CF8-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FB}@font-face{font-family:Poppins;font-style:normal;font-display:swap;font-weight:600;src:url(poppins-latin-ext-600-normal.472ef062.woff2)format("woff2"),url(poppins-all-600-normal.29420735.woff)format("woff");unicode-range:U+100-24F,U+259,U+1E??,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-display:swap;font-weight:600;src:url(poppins-latin-600-normal.15391d77.woff2)format("woff2"),url(poppins-all-600-normal.29420735.woff)format("woff");unicode-range:U+??,U+131,U+152-153,U+2BB-2BC,U+2C6,U+2DA,U+2DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}.skip-silence-bar .header{justify-content:center;align-items:center;margin-left:15px;display:flex}.skip-silence-bar{all:initial;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#fff;max-height:25px;background:#293033;border-radius:25px;align-items:center;padding:8px 8px 8px 20px;font-family:Poppins,sans-serif;animation:animate-in-command-bar .5s;display:flex;position:fixed;bottom:1rem;right:1rem}.skip-silence-bar .bar-text{align-items:center;display:flex}.skip-silence-bar .info{text-decoration:underline;color:#565656!important}.skip-silence-bar .speed-setting{display:flex}.skip-silence-bar .speed-setting label{white-space:nowrap;align-items:center;margin-right:5px;display:flex}.skip-silence-bar .slider-setting .setting-info{align-items:center;margin-top:0;display:flex}.skip-silence-bar .slider-setting input{display:none}.skip-silence-bar-collapsed{color:#fff;width:40px;height:40px;cursor:pointer;background:#293033;border-radius:50%;justify-content:center;align-items:center;animation:animate-in-command-collapsed .5s;display:flex;position:fixed;bottom:1rem;right:1rem}.skip-silence-bar,.skip-silence-bar-collapsed{z-index:100000}</style><div id="plasmo-shadow-container" style="z-index: 1; position: absolute;"><div id="plasmo-mount-container" style="display: flex; position: relative; top: 0px; left: 0px;"></div></div></template></div><body>
<div class="main">
<h2>Maze Robot Simulation</h2>
<p>
Consider that you are the programmer of some robot simulator. The environment of the robot is some maze. The maze is some rectangular array of fields. Each field can be a wall or an open space with optional number of marks. The robot stands on exactly one field in the maze which is not a wall. The state of the robot is defined by the maze, by the robot's coordinates in the maze, and by the robot's orientation in the maze. The orientation of the robot can be: North, East, West, and South.
The robot can do the following actions.
</p>
<dl>
<dt>Step</dt><dd> The robot moves exactly by one field in the direction of its orientation. This action can be done only if there is no wall in front of the robot. It is always guaranteed by the maze structure, that there is no possibility to get the robot outside the maze by this action. 
</dd>
<dt>Turn left</dt><dd> The robot turns left. This action changes robot's orientation (from N to W, from W to S, from S to E, and from E to N).
</dd>
<dt>Put mark</dt><dd> The robot puts the mark on the field where it is staying.
</dd>
<dt>Get mark</dt><dd> The robot gets the mark from the field where it is staying. This action can be done only if there is at least one mark on the field.
</dd>
</dl>
<p>
The programming language of the robot has several commands and forms: 
</p>
<p>
The language has following four commands: <tt>step</tt>, <tt>turn-left</tt>, <tt>put-mark</tt>, and <tt>get-mark</tt>. These commands correspond to the previously defined actions.
</p>
<p>
The language has two forms. The first form is sequence of commands or forms or procedure calls. This sequence is a simple Scheme list. If the sequence is an empty list, it means that the robot does nothing (something like NOP (No OPeration)).
Any non-empty sequence is interpreted sequentially. The first element in that sequence is interpreted first and then the second element ...
Every element can be: form or command or procedure call. 
</p>
<p>
The second form is if condition: <tt>(if &lt;condition&gt; &lt;positive-branch&gt; &lt;negative-branch&gt;)</tt>. 
If the condition is true then the positive branch is interpreted. 
Otherwise the negative branch is interpreted. 
The condition can be: <tt>north?</tt>, <tt>mark?</tt>, or <tt>wall?</tt>. 
</p><ul>
<li><tt>north?</tt> is true only if the current robot's orientation is north. Otherwise <tt>north?</tt> is false.     
</li>
<li><tt>mark?</tt> is true only if the field, where the robot is currently staying, has at least one mark. Otherwise <tt>mark?</tt> is false.
</li> 
<li><tt>wall?</tt> is true only if the action step is not possible for the current robot state. Otherwise <tt>wall?</tt> is false. 
</li>
</ul>
<p></p>
<p>
A program for the robot is a list of procedure definitions: <tt>(procedure &lt;name&gt; &lt;body&gt;)</tt>. Procedure definitions cannot be nested. The &lt;name&gt; means the name of the procedure. The &lt;body&gt; can be form, command or procedure call.
The procedure call is done by calling name of the procedure in the same way as command call. This can be done only if there is a definition of the procedure in the program. If the call of procedure is done then the interpretation continues on the next form, command or procedure call behind the last procedure call point. This behavior is similar to Scheme function call. 
</p>
<p>
Your task is to write the simulator in Scheme (by R5RS Scheme standard) of the robot's program: <tt>(simulate &lt;state&gt; &lt;expr&gt; &lt;program&gt; &lt;limit&gt;)</tt> where
</p><dl compact="">
<dt>&lt;state&gt;</dt><dd> is a state of the robot of the form: <tt>(&lt;maze&gt; (&lt;coordinate-x&gt; &lt;coordinate-y&gt;) &lt;orientation&gt;)</tt> where</dd>
	<dl compact="">
	<dt>&lt;maze&gt;</dt><dd> is a list of lists with the same length. Each element can be <tt>w</tt> as wall or non-negative number as the number of marks on this field.</dd>   
	<dt>&lt;coordinate-y&gt;</dt><dd> means the index (indexed from 0) of list in &lt;maze&gt; where the robot is staying.</dd>
	<dt>&lt;coordinate-x&gt;</dt><dd> means the index (indexed from 0) of element in list of &lt;maze&gt; where the robot is staying.</dd>
	<dt>&lt;orientation&gt;</dt><dd> can be: <tt>north</tt>, <tt>east</tt>, <tt>west</tt>, and <tt>south</tt>.</dd>
	</dl>
<dt>&lt;expr&gt;</dt><dd>  can content form, command, or procedure call.</dd> 
<dt>&lt;program&gt;</dt><dd> can content list of procedure definitions.</dd>
<dt>&lt;limit&gt;</dt><dd> is a number which means maximum nested procedure calls.  If a new procedure call exceeds the limit then this call cannot be done.</dd> 
</dl>
<p></p>
<p>
The simulate function returns <tt>(&lt;action sequence&gt; (&lt;maze&gt; (&lt;coordinate-x&gt; &lt;coordinate-y&gt;) &lt;orientation&gt;))</tt> where &lt;action sequence&gt; is a list of actions that were applied during the simulation and <tt>(&lt;maze&gt; (&lt;coordinate-x&gt; &lt;coordinate-y&gt;)) &lt;orientation&gt;</tt> is the last state of the robot.
</p>
<p>
If some command or form or procedure call cannot be done then the simulator ends and returns the last legal state of the robot. 
</p>

<a href="https://cw.felk.cvut.cz/courses/a4b33flp/getdata.php?task=simulator&amp;item=sample01.ss"><h3>Example:</h3></a>
Consider the following part of Scheme program:
<pre>(define get-maze
'(
(w w w w w w)
(w 0 w 0 w w)
(w 0 w 0 0 w)
(w 0 0 0 w w)
(w w w w w w)
)
)
(define right-hand-rule-prg
  '(
    (procedure start
      ( turn-right
        (if wall?
           ( turn-left
             (if wall?
                 (turn-left
                     (if wall?
                        turn-left
                        step
                     )
                 )
                 step
              )
           )
           step  
        )
        put-mark
        start
      )
    )   
    (procedure turn-right (turn-left turn-left turn-left))
  )
)
</pre>
Now we call:
<pre>&gt;  (simulate (list get-maze (list 1 1) 'south) 'start right-hand-rule-prg 3)
</pre>
And we obtain (according to the task specification):
<pre>(
 (turn-left turn-left turn-left turn-left step put-mark turn-left  turn-left turn-left turn-left step put-mark)
 (((w w w w w w) 
   (w 0 w 0 w w) 
   (w 1 w 0 0 w) 
   (w 1 0 0 w w) 
   (w w w w w w)) 
 (1 3) south))
</pre>

<h3>
Example 2 (<a href="https://cw.felk.cvut.cz/courses/a4b33flp/getdata.php?task=simulator&amp;item=sample02.in">input</a>,<a href="https://cw.felk.cvut.cz/courses/a4b33flp/getdata.php?task=simulator&amp;item=sample02.out">output</a>),
Example 3 (<a href="https://cw.felk.cvut.cz/courses/a4b33flp/getdata.php?task=simulator&amp;item=sample03.in">input</a>,<a href="https://cw.felk.cvut.cz/courses/a4b33flp/getdata.php?task=simulator&amp;item=sample03.out">output</a>),
Example 4 (<a href="https://cw.felk.cvut.cz/courses/a4b33flp/getdata.php?task=simulator&amp;item=sample04.in">input</a>,<a href="https://cw.felk.cvut.cz/courses/a4b33flp/getdata.php?task=simulator&amp;item=sample04.out">output</a>),
Example 5 (<a href="https://cw.felk.cvut.cz/courses/a4b33flp/getdata.php?task=simulator&amp;item=sample05.in">input</a>,<a href="https://cw.felk.cvut.cz/courses/a4b33flp/getdata.php?task=simulator&amp;item=sample05.out">output</a>),
Example 6 (<a href="https://cw.felk.cvut.cz/courses/a4b33flp/getdata.php?task=simulator&amp;item=sample06.in">input</a>,<a href="https://cw.felk.cvut.cz/courses/a4b33flp/getdata.php?task=simulator&amp;item=sample06.out">output</a>),
Example 7 (<a href="https://cw.felk.cvut.cz/courses/a4b33flp/getdata.php?task=simulator&amp;item=sample07.in">input</a>,<a href="https://cw.felk.cvut.cz/courses/a4b33flp/getdata.php?task=simulator&amp;item=sample07.out">output</a>),
Example 8 (<a href="https://cw.felk.cvut.cz/courses/a4b33flp/getdata.php?task=simulator&amp;item=sample08.in">input</a>,<a href="https://cw.felk.cvut.cz/courses/a4b33flp/getdata.php?task=simulator&amp;item=sample08.out">output</a>)
Example 9 (<a href="https://cw.felk.cvut.cz/courses/a4b33flp/getdata.php?task=simulator&amp;item=sample09.in">input</a>,<a href="https://cw.felk.cvut.cz/courses/a4b33flp/getdata.php?task=simulator&amp;item=sample09.out">output</a>)
</h3>



</div></body></html>